import{d as j,r as _,c as T,o as st,a as l,b as c,e as t,f as k,w as P,v as x,t as i,n as F,g as w,F as A,h as I,i as ot,j as nt}from"./vendor-C-X8TcdF.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))p(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const y of r.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&p(y)}).observe(document,{childList:!0,subtree:!0});function v(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function p(a){if(a.ep)return;a.ep=!0;const r=v(a);fetch(a.href,r)}})();const at={class:"zhihu-hot-section"},it={class:"config-panel"},lt={class:"config-group"},ct=["disabled"],rt={class:"config-group"},ut=["disabled"],dt={class:"config-group"},ht=["disabled"],vt={class:"config-actions"},ft=["disabled"],pt=["disabled"],bt={key:0,class:"control-panel"},_t={class:"control-group"},gt=["disabled"],mt=["disabled"],yt=["disabled"],kt=["disabled"],Ht={class:"cache-info"},Gt={key:1,class:"status-bar"},wt={key:2,class:"error-bar"},St={class:"error"},$t={key:3,class:"hot-list-section"},Ct={class:"section-title"},Tt={class:"timestamp"},At={class:"hot-list"},It={class:"rank"},zt={class:"content"},Nt={class:"title"},Pt=["href"],xt={key:0,class:"description"},Vt={class:"meta"},Dt={class:"heat"},Et={class:"time"},Ot={key:4,class:"snapshots-section"},Lt={class:"section-title"},Ft={class:"snapshots-list"},jt=["onClick"],Mt={class:"snapshot-time"},Ut={class:"snapshot-count"},Jt={class:"toggle-icon"},Kt={key:0,class:"snapshot-content"},Bt={class:"idx"},Rt={class:"title"},Zt={class:"heat"},qt={key:5,class:"empty-state"},Yt=j({__name:"ZhihuHot",setup(S){const n=_({username:"geeker-wang",repo:"first_page",dataPath:"data/zhihu-hot.json"}),v=_([]),p=_([]),a=_(!1),r=_(!1),y=_(!1),d=_(),f=_(""),C=_(""),V=_("info"),H=_(new Set),M=T(()=>{const e=localStorage.getItem("zhihu_cache_timestamp");return e?new Date(parseInt(e)).toLocaleString("zh-CN"):"æ— "}),m=T(()=>!!n.value.username&&!!n.value.repo),U=T(()=>n.value.username&&n.value.repo),J=T(()=>d.value?new Date(d.value).toLocaleString("zh-CN"):"æš‚æ— "),h=(e,s="info",o=3e3)=>{C.value=e,V.value=s,o>0&&setTimeout(()=>{C.value=""},o)},b=e=>{f.value=e},D=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),K=()=>{try{localStorage.setItem("zhihu_github_config",JSON.stringify(n.value)),h("âœ… é…ç½®å·²ä¿å­˜","success"),O()}catch(e){b(`ä¿å­˜é…ç½®å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}},B=()=>{confirm("ç¡®å®šè¦é‡ç½®é…ç½®å—ï¼Ÿ")&&(localStorage.removeItem("zhihu_github_config"),n.value={username:"",repo:"first_page",dataPath:"data/zhihu-hot.json"},v.value=[],p.value=[],h("âš ï¸ é…ç½®å·²é‡ç½®","warning"))},R=()=>{const e=localStorage.getItem("zhihu_github_config");if(e)try{const s=JSON.parse(e);n.value={...n.value,...s},h("âœ… é…ç½®å·²æ¢å¤","info",2e3)}catch(s){console.error("åŠ è½½é…ç½®å¤±è´¥:",s)}},E=()=>`https://api.github.com/repos/${n.value.username}/${n.value.repo}/contents/${n.value.dataPath}`,z=async()=>{const e=E(),s=await fetch(e);if(!s.ok)throw s.status===404?new Error("æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·å…ˆè¿è¡Œ GitHub Actions æŠ“å–æ•°æ®"):s.status===403?new Error("API é™åˆ¶ï¼Œè¯·ç¨åå†è¯•ï¼ˆæˆ–ä½¿ç”¨ä¸ªäºº Tokenï¼‰"):new Error(`HTTP ${s.status}: ${s.statusText}`);const o=await s.json(),u=atob(o.content),g=new Uint8Array(u.length);for(let G=0;G<u.length;G++)g[G]=u.charCodeAt(G);const $=new TextDecoder("utf-8").decode(g);return JSON.parse($)},O=async()=>{if(!n.value.username||!n.value.repo){b("è¯·å…ˆè¾“å…¥ GitHub ç”¨æˆ·åå’Œä»“åº“å");return}r.value=!0,f.value="";try{const e=E(),s=await fetch(e);s.status===200?h("âœ… GitHub è¿æ¥æˆåŠŸ","success"):s.status===404?b("æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼ˆdata/zhihu-hot.jsonï¼‰ï¼Œè¯·å…ˆè¿è¡Œ GitHub Actions"):b(`è¿æ¥å¤±è´¥: HTTP ${s.status}`)}catch(e){b(`æµ‹è¯•å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{r.value=!1}},Z=async()=>{if(!m.value){b("è¯·å…ˆé…ç½® GitHub ä¿¡æ¯");return}a.value=!0,f.value="",h("ğŸ”„ æ­£åœ¨ä» GitHub åŠ è½½...","info",0);try{const e="zhihu_cache_data",s="zhihu_cache_timestamp",o=localStorage.getItem(e),u=localStorage.getItem(s);if(o&&u&&Date.now()-parseInt(u)<5*60*1e3){console.log("ä½¿ç”¨ç¼“å­˜æ•°æ®");const $=JSON.parse(o);L($),h("âœ… ä»ç¼“å­˜åŠ è½½æˆåŠŸ","success"),a.value=!1;return}const g=await z();g.length>0?(localStorage.setItem(e,JSON.stringify(g)),localStorage.setItem(s,Date.now().toString()),L(g),h(`âœ… åŠ è½½æˆåŠŸ: ${g.length} æ¡å†å²è®°å½•`,"success")):h("â„¹ï¸ æš‚æ— æ•°æ®","info")}catch(e){b(`åŠ è½½å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{a.value=!1}},L=e=>{var s;p.value=e,(s=e[0])!=null&&s.items&&(v.value=e[0].items,d.value=e[0].timestamp)},q=async()=>{if(!m.value){b("è¯·å…ˆé…ç½® GitHub ä¿¡æ¯");return}a.value=!0,f.value="",h("ğŸ”„ æ­£åœ¨åŠ è½½æœ€æ–°æ•°æ®...","info",0);try{const e=await z();e.length>0?(v.value=e[0].items,d.value=e[0].timestamp,h(`âœ… æœ€æ–°æ•°æ®: ${e[0].formattedTime}`,"success")):h("â„¹ï¸ æš‚æ— æ•°æ®","info")}catch(e){b(`åŠ è½½å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{a.value=!1}},Y=async()=>{var e,s;if(!m.value){b("è¯·å…ˆé…ç½® GitHub ä¿¡æ¯");return}try{const o=await z();if(o.length===0){alert("æš‚æ— æ•°æ®");return}const u=o.reduce((G,et)=>G+et.count,0),g=((e=o[o.length-1])==null?void 0:e.formattedTime)||"æ— ",N=((s=o[0])==null?void 0:s.formattedTime)||"æ— ",$=`
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:
- æ€»å¿«ç…§æ•°: ${o.length}
- æ€»æ¡ç›®æ•°: ${u}
- é¦–æ¬¡è®°å½•: ${g}
- æœ€åè®°å½•: ${N}
    `.trim();alert($)}catch(o){b(`è·å–ç»Ÿè®¡å¤±è´¥: ${o instanceof Error?o.message:"æœªçŸ¥é”™è¯¯"}`)}},Q=async()=>{if(!m.value){b("è¯·å…ˆé…ç½® GitHub ä¿¡æ¯");return}y.value=!0,f.value="",h("ğŸ”„ æ­£åœ¨è§¦å‘ GitHub Actions...","info",0);try{const e=`
âš ï¸ æ‰‹åŠ¨è§¦å‘æŠ“å–

ç”±äº GitHub å®‰å…¨é™åˆ¶ï¼Œå‰ç«¯æ— æ³•ç›´æ¥è§¦å‘ Actionsã€‚

è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. è®¿é—®ä½ çš„ GitHub ä»“åº“
2. è¿›å…¥ Actions æ ‡ç­¾é¡µ
3. æ‰¾åˆ°"è‡ªåŠ¨æŠ“å–çŸ¥ä¹çƒ­æ¦œ"
4. ç‚¹å‡»"Run workflow"
5. ç­‰å¾… 10-20 ç§’
6. è¿”å›é¡µé¢ç‚¹å‡»"ä» GitHub åŠ è½½"

æˆ–è€…ç­‰å¾…ä¸‹ä¸€æ¬¡è‡ªåŠ¨æŠ“å–ï¼ˆæ¯30åˆ†é’Ÿï¼‰

æç¤ºï¼šä½ ä¹Ÿå¯ä»¥æ·»åŠ  GitHub Token æ¥è‡ªåŠ¨è§¦å‘
    `.trim();alert(e),h("â„¹ï¸ è¯·æ‰‹åŠ¨è§¦å‘ GitHub Actions","info")}catch(e){b(`è§¦å‘å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{y.value=!1}},W=e=>{H.value.has(e)?H.value.delete(e):H.value.add(e)},X=()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿï¼ˆä»…æœ¬åœ°ç¼“å­˜ï¼Œä¸å½±å“ GitHub ä¸Šçš„æ•°æ®ï¼‰")&&(p.value=[],H.value.clear(),h("âœ… å†å²è®°å½•å·²æ¸…ç©º","info"))},tt=()=>{localStorage.removeItem("zhihu_cache_data"),localStorage.removeItem("zhihu_cache_timestamp"),h("âœ… ç¼“å­˜å·²æ¸…é™¤","success")};return st(()=>{R()}),(e,s)=>(c(),l("div",at,[s[9]||(s[9]=t("div",{class:"section-header"},[t("h2",null,"ğŸ”¥ çŸ¥ä¹çƒ­æ¦œç›‘æ§"),t("p",{class:"subtitle"},"GitHub Actions è‡ªåŠ¨æŠ“å– + GitHub API å­˜å‚¨")],-1)),t("div",it,[t("div",lt,[s[4]||(s[4]=t("label",null,"GitHub ç”¨æˆ·å",-1)),P(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value.username=o),type:"text",placeholder:"your-username",disabled:m.value},null,8,ct),[[x,n.value.username]])]),t("div",rt,[s[5]||(s[5]=t("label",null,"ä»“åº“å",-1)),P(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.repo=o),type:"text",placeholder:"first_page",disabled:m.value},null,8,ut),[[x,n.value.repo]])]),t("div",dt,[s[6]||(s[6]=t("label",null,"æ•°æ®æ–‡ä»¶è·¯å¾„",-1)),P(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>n.value.dataPath=o),type:"text",placeholder:"data/zhihu-hot.json",disabled:m.value},null,8,ht),[[x,n.value.dataPath]])]),t("div",vt,[m.value?(c(),l("button",{key:1,onClick:B,class:"btn btn-secondary"}," é‡ç½®é…ç½® ")):(c(),l("button",{key:0,onClick:K,class:"btn btn-primary",disabled:!U.value}," ä¿å­˜é…ç½® ",8,ft)),m.value?(c(),l("button",{key:2,onClick:O,class:"btn btn-info",disabled:r.value},i(r.value?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿æ¥"),9,pt)):k("",!0)]),s[7]||(s[7]=t("div",{class:"config-hint"}," ğŸ’¡ æç¤ºï¼šGitHub Actions ä¼šæ¯30åˆ†é’Ÿè‡ªåŠ¨æŠ“å–å¹¶ä¿å­˜æ•°æ® ",-1))]),m.value?(c(),l("div",bt,[t("div",_t,[t("button",{onClick:Z,class:"btn btn-primary",disabled:a.value},i(a.value?"åŠ è½½ä¸­...":"ä» GitHub åŠ è½½"),9,gt),t("button",{onClick:q,class:"btn btn-success",disabled:a.value}," åŠ è½½æœ€æ–° ",8,mt),t("button",{onClick:Y,class:"btn btn-info",disabled:a.value}," ç»Ÿè®¡ä¿¡æ¯ ",8,yt),t("button",{onClick:Q,class:"btn btn-warning",disabled:y.value},i(y.value?"è§¦å‘ä¸­...":"æ‰‹åŠ¨è§¦å‘æŠ“å–"),9,kt)]),t("div",Ht,[t("span",null,"æœ¬åœ°ç¼“å­˜: "+i(M.value),1),t("button",{onClick:tt,class:"btn btn-sm"},"æ¸…é™¤ç¼“å­˜")])])):k("",!0),C.value?(c(),l("div",Gt,[t("div",{class:F(["status",V.value])},i(C.value),3)])):k("",!0),f.value?(c(),l("div",wt,[t("div",St,[w(" âŒ "+i(f.value)+" ",1),t("button",{onClick:s[3]||(s[3]=o=>f.value=""),class:"btn-close"},"âœ•")])])):k("",!0),v.value.length>0?(c(),l("div",$t,[t("div",Ct,[t("h3",null,"ğŸ“Š å½“å‰çƒ­æ¦œ ("+i(v.value.length)+"æ¡)",1),t("span",Tt,"æœ€åæ›´æ–°: "+i(J.value),1)]),t("div",At,[(c(!0),l(A,null,I(v.value,(o,u)=>(c(),l("div",{key:o.id,class:F(["hot-item",{"top-3":u<3}])},[t("div",It,i(u+1),1),t("div",zt,[t("div",Nt,[t("a",{href:o.url,target:"_blank"},i(o.title),9,Pt)]),o.description?(c(),l("div",xt,i(o.description),1)):k("",!0),t("div",Vt,[t("span",Dt,"ğŸ”¥ "+i(D(o.heat)),1),t("span",Et,i(o.fetchTime),1)])])],2))),128))])])):k("",!0),p.value.length>0?(c(),l("div",Ot,[t("div",Lt,[t("h3",null,"ğŸ“š å†å²å¿«ç…§ ("+i(p.value.length)+"æ¡)",1),t("button",{onClick:X,class:"btn btn-danger btn-sm"},"æ¸…ç©ºæœ¬åœ°å†å²")]),t("div",Ft,[(c(!0),l(A,null,I(p.value,o=>(c(),l("div",{key:o.id,class:"snapshot-item"},[t("div",{class:"snapshot-header",onClick:u=>W(o.id)},[t("span",Mt,"ğŸ“… "+i(o.formattedTime),1),t("span",Ut,i(o.count)+" æ¡",1),t("span",Jt,i(H.value.has(o.id)?"â–¼":"â–¶"),1)],8,jt),H.value.has(o.id)?(c(),l("div",Kt,[(c(!0),l(A,null,I(o.items,(u,g)=>(c(),l("div",{key:u.id,class:"snapshot-item-detail"},[t("span",Bt,i(g+1),1),t("span",Rt,i(u.title),1),t("span",Zt,i(D(u.heat)),1)]))),128))])):k("",!0)]))),128))])])):k("",!0),!a.value&&v.value.length===0&&!f.value?(c(),l("div",qt,[...s[8]||(s[8]=[t("div",{class:"empty-icon"},"ğŸ”",-1),t("div",{class:"empty-text"},'æš‚æ— æ•°æ®ï¼Œè¯·é…ç½® GitHub ä¿¡æ¯åç‚¹å‡»"ä» GitHub åŠ è½½"',-1),t("div",{class:"empty-hint"},[w(" ğŸ’¡ æç¤ºï¼š"),t("br"),w(" 1. é…ç½® GitHub ä»“åº“ä¿¡æ¯"),t("br"),w(' 2. ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯'),t("br"),w(' 3. ç‚¹å‡»"ä» GitHub åŠ è½½"æŸ¥çœ‹æ•°æ®'),t("br"),w(" 4. GitHub Actions ä¼šè‡ªåŠ¨å®šæ—¶æŠ“å– ")],-1)])])):k("",!0)]))}}),Qt=(S,n)=>{const v=S.__vccOpts||S;for(const[p,a]of n)v[p]=a;return v},Wt=Qt(Yt,[["__scopeId","data-v-81ac2eae"]]),Xt={id:"app"},te={class:"container"},ee={class:"original-section"},se={class:"counter-section"},oe={class:"counter"},ne={class:"features"},ae={class:"icon"},ie={class:"footer"},le=j({__name:"App",setup(S){const n=_(0),v=_([{icon:"âš¡",title:"å¿«é€Ÿå¼€å‘",desc:"Vite æä¾›é—ªç”µèˆ¬çš„å¼€å‘ä½“éªŒ"},{icon:"ğŸ“¦",title:"ç»„ä»¶åŒ–",desc:"Vue 3 ç»„åˆå¼ API æ›´çµæ´»"},{icon:"ğŸ¨",title:"ç°ä»£åŒ–",desc:"å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…"},{icon:"ğŸš€",title:"è‡ªåŠ¨éƒ¨ç½²",desc:"GitHub Actions é›†æˆ"}]);function p(){n.value++}function a(){n.value--}function r(){n.value=0}return(y,d)=>(c(),l("div",Xt,[t("div",te,[d[3]||(d[3]=t("div",{class:"header"},[t("div",{class:"logo"},"ğŸš€"),t("h1",null,"çŸ¥ä¹çƒ­æ¦œç›‘æ§ç³»ç»Ÿ"),t("p",{class:"subtitle"},"Vue 3 + TypeScript + GitHub Actions + GitHub API å­˜å‚¨")],-1)),ot(Wt),d[4]||(d[4]=t("div",{class:"divider"},null,-1)),t("div",ee,[d[0]||(d[0]=t("h2",null,"ğŸ¯ åŸå§‹æ¼”ç¤ºåŠŸèƒ½",-1)),t("div",se,[t("div",oe,i(n.value),1),t("div",{class:"buttons"},[t("button",{onClick:a,class:"btn btn-danger"},"-"),t("button",{onClick:p,class:"btn btn-primary"},"+"),t("button",{onClick:r,class:"btn btn-secondary"},"é‡ç½®")])]),t("div",ne,[(c(!0),l(A,null,I(v.value,f=>(c(),l("div",{class:"feature-card",key:f.title},[t("div",ae,i(f.icon),1),t("h3",null,i(f.title),1),t("p",null,i(f.desc),1)]))),128))]),d[1]||(d[1]=t("div",{class:"actions"},[t("a",{href:"https://vitejs.dev",target:"_blank",class:"btn-link"},"Vite Docs"),t("a",{href:"https://vuejs.org",target:"_blank",class:"btn-link"},"Vue Docs"),t("a",{href:"https://docs.github.com/actions",target:"_blank",class:"btn-link"},"GitHub Actions Docs")],-1))]),t("div",ie,[d[2]||(d[2]=t("p",null,"ä½¿ç”¨ Vue 3 + TypeScript + Vite æ„å»º",-1)),t("p",null,"éƒ¨ç½²äº "+i(new Date().getFullYear())+" | GitHub Actions è‡ªåŠ¨éƒ¨ç½²",1)])])]))}});nt(le).mount("#app");
//# sourceMappingURL=index-DaWEtSFG.js.map
